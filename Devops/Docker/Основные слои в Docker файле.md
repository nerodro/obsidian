
В каждом Docker файле у нас есть несколько слоев и каждый из них важен

Следует помнить, что Инструкция != слои, слоем в docker файле называются те изменения которые влекут изменения в файловой системе которые создаются в результате выполнения инструкций

[[Основные команды в Dockerfile]]

Слой FROM это самый первый и самый важный слой нашего приложения, благодаря данному слою мы можем загружать базовый образ для работы с нашим контейнером, будь то alpine который является наиболее легковесным дистрибутивном, рекомендуемым к использованию в контейнерах для экономий ресурсов или к примеру любой ЯП, python/java и тд

Слой COPY и ADD на данном слое мы можем добавлять в наш проект внешние файлы, ссылки или архивы и работать с ними в дальнейшем

Слои RUN на данном слое мы запускаем наш собранный проект

При этом, необходимо помнить, что добавление каждого слоя влечет за собой добавление дополнительных зависимостей или выполнение дополнительных инструкций что всегда будет сказывать и на потреблений ресурсов контейнера в том числе 

Для оптимизаций контейнеров в Docker существуют multi stage сборки, данная технология позволяет нам в рамках одного docker файла описать сразу несколько стадий, например мы сначала пишем инструкцию по сборке нашего проекта 
А затем, в следующей стадий мы удаляем все лишние зависимости, подтягиваем легковесный образ, например alpine и запускаем наш проект, что позволяет нам существенно экономить ресурсы

[[Multistage сборки]]