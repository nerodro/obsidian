ReplicaSet является одним из наиболее популярных контроллеров кластера k8s
Хотя напрямую данных контроллер создается редко, чаще его создают через [[Deployment]], однако именно данный контроллер работает под капотом deployment
Данный контроллер имеет два сценария работы:


1. 1. Пользователь применяет манифест, посредством `kubectl apply manifest.yaml`
2. Данный манифест отправляется в kube-api, где kube-amission его валидирует и в случае отсутствия ошибок отправляет в [[etcd]]
3. Etcd обновляет у себя информацию о кластере после чего посылает данные в kube-api
4. Kube-api получив данные из etcd посредством watch отправляет информацию в informer нужного контроллера
5. Данные в приходят в infromer контроллера по средствам подписки kube-watch, или из deployment
6. infromer обновляет свой локальный кэш, после чего информирует о новом запросе replicaset
7. ReplicaSet читает конфигурацию, после чего создает [[Pod]] и передает его в [[scheduler]] который уже планирует его на узел

Второй сценарий :

1. Pod на конечном [[Node]] падает
2. [[Kubelet]] посредством kube-api отправляет данную информацию в etcd
3. Etcd обновляет у себя информацию о кластере после чего посылает данные в kube-api
4. Kube-api получив данные из etcd посредством watch отправляет информацию в informer нужного контроллера, например deployment
5. Получив обновление informer обновляет свой локальный кэш, после чего сообщает об изменениях deployment контроллеру
6. Deployment контроллер в свою очередь вызывает replicaset, который создает pod, после чего данный pod посредством kube-api отправляет в планировщик

Так же, replicaset является заменой более старого контроллера replicaController, который хотя и существует до сих пор в k8s, но на практике практически не используется